<script type="text/javascript">
  RED.nodes.registerType("ShuttleXpress", {
    category: "ShuttleXpress",
    color: "#dce0d9",
    defaults: {
      name: {value: ""}
    },
    inputs: 0,
    outputs: 1,
    outputLabels: ["ShuttleXpress Status"],
    icon: "shuttlexpress.png",
    label: function() {
      return this.name || "ShuttleXpress";
    }
  });
</script>

<script type="text/html" data-template-name="ShuttleXpress">

  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name </label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>

</script>

<script type="text/html" data-help-name="ShuttleXpress">

    <p>This node parses the output buffer data from a Contour Design ShuttleXpress device. The parsed buffer data is output to msg.payload as an object containing "cmd", "value" and "buffer" properties. The "buffer" property is the raw buffer from the ShuttleXpress device that can be easily parsed using the <a href="https://flows.nodered.org/node/node-red-contrib-buffer-parser">node-red-contrib-buffer-parser</a> node. If a device error occurs, it will be handled using node.error().</p>

    <h3>Output</h3>
        <ol class="node-ports">
            <li>Standard Output
                <dl class="message-properties">
                    <dt>payload<span class="property-type">object</span></dt>
                    <br>
                    <dd>{cmd: BTN_#, value: boolean, buffer: &lt;00 00 00 20 01&gt;}</dd>
                    <br>
                    <dd>{cmd: MPG, value: -1 or 1, buffer: &lt;00 FF 00 00 00&gt;}</dd>
                    <br>
                    <dd>{cmd: JOG, value: -7 to 7, buffer: &lt;FF 00 00 00 00&gt;}</dd>
                </dl>
            </li>
        </ol>

    <h3>Output Details</h3>
        <p>'BTN_#' - returns true for button pressed, false for button released.</p>
        <br>
        <p>'MPG' - returns either -1 or +1 to reflect CCW (negative) or CW (positive) direction of the MPG (Manual Pulse Generator) dial.</p>
        <br>
        <p>'JOG - returns integer values between -7 and 7 where 0 is the resting state of the jog dial, negative values are CCW and positive values are CW on the jog dial.</p>

</script>